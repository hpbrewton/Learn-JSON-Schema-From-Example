var cov_1vh7xrxj5f=function(){var path="/Users/hb/latlib/jsserver/javascript-algorithms/src/data-structures/tree/BinaryTreeNode.js";var hash="52ccdf7741cb1b2106662ce4617430035e5e4485";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/hb/latlib/jsserver/javascript-algorithms/src/data-structures/tree/BinaryTreeNode.js",statementMap:{"0":{start:{line:9,column:4},end:{line:9,column:21}},"1":{start:{line:10,column:4},end:{line:10,column:22}},"2":{start:{line:11,column:4},end:{line:11,column:23}},"3":{start:{line:12,column:4},end:{line:12,column:23}},"4":{start:{line:15,column:4},end:{line:15,column:32}},"5":{start:{line:18,column:4},end:{line:18,column:43}},"6":{start:{line:25,column:4},end:{line:27,column:5}},"7":{start:{line:26,column:6},end:{line:26,column:15}},"8":{start:{line:29,column:4},end:{line:29,column:32}},"9":{start:{line:36,column:4},end:{line:38,column:5}},"10":{start:{line:37,column:6},end:{line:37,column:15}},"11":{start:{line:40,column:4},end:{line:40,column:33}},"12":{start:{line:47,column:4},end:{line:47,column:55}},"13":{start:{line:54,column:4},end:{line:54,column:46}},"14":{start:{line:63,column:4},end:{line:65,column:5}},"15":{start:{line:64,column:6},end:{line:64,column:23}},"16":{start:{line:68,column:4},end:{line:70,column:5}},"17":{start:{line:69,column:6},end:{line:69,column:23}},"18":{start:{line:73,column:4},end:{line:75,column:5}},"19":{start:{line:74,column:6},end:{line:74,column:23}},"20":{start:{line:79,column:4},end:{line:82,column:5}},"21":{start:{line:81,column:6},end:{line:81,column:38}},"22":{start:{line:85,column:4},end:{line:85,column:35}},"23":{start:{line:93,column:4},end:{line:93,column:23}},"24":{start:{line:95,column:4},end:{line:95,column:16}},"25":{start:{line:104,column:4},end:{line:106,column:5}},"26":{start:{line:105,column:6},end:{line:105,column:30}},"27":{start:{line:109,column:4},end:{line:109,column:21}},"28":{start:{line:112,column:4},end:{line:114,column:5}},"29":{start:{line:113,column:6},end:{line:113,column:30}},"30":{start:{line:116,column:4},end:{line:116,column:16}},"31":{start:{line:125,column:4},end:{line:127,column:5}},"32":{start:{line:126,column:6},end:{line:126,column:31}},"33":{start:{line:130,column:4},end:{line:130,column:22}},"34":{start:{line:133,column:4},end:{line:135,column:5}},"35":{start:{line:134,column:6},end:{line:134,column:31}},"36":{start:{line:137,column:4},end:{line:137,column:16}},"37":{start:{line:145,column:4},end:{line:148,column:5}},"38":{start:{line:146,column:6},end:{line:146,column:23}},"39":{start:{line:147,column:6},end:{line:147,column:18}},"40":{start:{line:150,column:4},end:{line:153,column:5}},"41":{start:{line:151,column:6},end:{line:151,column:24}},"42":{start:{line:152,column:6},end:{line:152,column:18}},"43":{start:{line:155,column:4},end:{line:155,column:17}},"44":{start:{line:164,column:4},end:{line:166,column:5}},"45":{start:{line:165,column:6},end:{line:165,column:19}},"46":{start:{line:168,column:4},end:{line:171,column:5}},"47":{start:{line:169,column:6},end:{line:169,column:34}},"48":{start:{line:170,column:6},end:{line:170,column:18}},"49":{start:{line:173,column:4},end:{line:176,column:5}},"50":{start:{line:174,column:6},end:{line:174,column:35}},"51":{start:{line:175,column:6},end:{line:175,column:18}},"52":{start:{line:178,column:4},end:{line:178,column:17}},"53":{start:{line:186,column:4},end:{line:186,column:42}},"54":{start:{line:187,column:4},end:{line:187,column:40}},"55":{start:{line:188,column:4},end:{line:188,column:42}},"56":{start:{line:195,column:19},end:{line:195,column:21}},"57":{start:{line:198,column:4},end:{line:200,column:5}},"58":{start:{line:199,column:6},end:{line:199,column:62}},"59":{start:{line:203,column:4},end:{line:203,column:30}},"60":{start:{line:206,column:4},end:{line:208,column:5}},"61":{start:{line:207,column:6},end:{line:207,column:63}},"62":{start:{line:210,column:4},end:{line:210,column:20}},"63":{start:{line:217,column:4},end:{line:217,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:8,column:2},end:{line:8,column:3}},loc:{start:{line:8,column:28},end:{line:19,column:3}},line:8},"1":{name:"(anonymous_1)",decl:{start:{line:24,column:2},end:{line:24,column:3}},loc:{start:{line:24,column:19},end:{line:30,column:3}},line:24},"2":{name:"(anonymous_2)",decl:{start:{line:35,column:2},end:{line:35,column:3}},loc:{start:{line:35,column:20},end:{line:41,column:3}},line:35},"3":{name:"(anonymous_3)",decl:{start:{line:46,column:2},end:{line:46,column:3}},loc:{start:{line:46,column:15},end:{line:48,column:3}},line:46},"4":{name:"(anonymous_4)",decl:{start:{line:53,column:2},end:{line:53,column:3}},loc:{start:{line:53,column:22},end:{line:55,column:3}},line:53},"5":{name:"(anonymous_5)",decl:{start:{line:61,column:2},end:{line:61,column:3}},loc:{start:{line:61,column:14},end:{line:86,column:3}},line:61},"6":{name:"(anonymous_6)",decl:{start:{line:92,column:2},end:{line:92,column:3}},loc:{start:{line:92,column:18},end:{line:96,column:3}},line:92},"7":{name:"(anonymous_7)",decl:{start:{line:102,column:2},end:{line:102,column:3}},loc:{start:{line:102,column:16},end:{line:117,column:3}},line:102},"8":{name:"(anonymous_8)",decl:{start:{line:123,column:2},end:{line:123,column:3}},loc:{start:{line:123,column:17},end:{line:138,column:3}},line:123},"9":{name:"(anonymous_9)",decl:{start:{line:144,column:2},end:{line:144,column:3}},loc:{start:{line:144,column:28},end:{line:156,column:3}},line:144},"10":{name:"(anonymous_10)",decl:{start:{line:163,column:2},end:{line:163,column:3}},loc:{start:{line:163,column:47},end:{line:179,column:3}},line:163},"11":{name:"(anonymous_11)",decl:{start:{line:185,column:2},end:{line:185,column:3}},loc:{start:{line:185,column:42},end:{line:189,column:3}},line:185},"12":{name:"(anonymous_12)",decl:{start:{line:194,column:2},end:{line:194,column:3}},loc:{start:{line:194,column:20},end:{line:211,column:3}},line:194},"13":{name:"(anonymous_13)",decl:{start:{line:216,column:2},end:{line:216,column:3}},loc:{start:{line:216,column:13},end:{line:218,column:3}},line:216}},branchMap:{"0":{loc:{start:{line:8,column:14},end:{line:8,column:26}},type:"default-arg",locations:[{start:{line:8,column:22},end:{line:8,column:26}}],line:8},"1":{loc:{start:{line:25,column:4},end:{line:27,column:5}},type:"if",locations:[{start:{line:25,column:4},end:{line:27,column:5}},{start:{line:25,column:4},end:{line:27,column:5}}],line:25},"2":{loc:{start:{line:36,column:4},end:{line:38,column:5}},type:"if",locations:[{start:{line:36,column:4},end:{line:38,column:5}},{start:{line:36,column:4},end:{line:38,column:5}}],line:36},"3":{loc:{start:{line:63,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:65,column:5}},{start:{line:63,column:4},end:{line:65,column:5}}],line:63},"4":{loc:{start:{line:68,column:4},end:{line:70,column:5}},type:"if",locations:[{start:{line:68,column:4},end:{line:70,column:5}},{start:{line:68,column:4},end:{line:70,column:5}}],line:68},"5":{loc:{start:{line:73,column:4},end:{line:75,column:5}},type:"if",locations:[{start:{line:73,column:4},end:{line:75,column:5}},{start:{line:73,column:4},end:{line:75,column:5}}],line:73},"6":{loc:{start:{line:73,column:8},end:{line:73,column:61}},type:"binary-expr",locations:[{start:{line:73,column:8},end:{line:73,column:32}},{start:{line:73,column:36},end:{line:73,column:61}}],line:73},"7":{loc:{start:{line:79,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:79,column:4},end:{line:82,column:5}},{start:{line:79,column:4},end:{line:82,column:5}}],line:79},"8":{loc:{start:{line:104,column:4},end:{line:106,column:5}},type:"if",locations:[{start:{line:104,column:4},end:{line:106,column:5}},{start:{line:104,column:4},end:{line:106,column:5}}],line:104},"9":{loc:{start:{line:112,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:112,column:4},end:{line:114,column:5}},{start:{line:112,column:4},end:{line:114,column:5}}],line:112},"10":{loc:{start:{line:125,column:4},end:{line:127,column:5}},type:"if",locations:[{start:{line:125,column:4},end:{line:127,column:5}},{start:{line:125,column:4},end:{line:127,column:5}}],line:125},"11":{loc:{start:{line:133,column:4},end:{line:135,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:135,column:5}},{start:{line:133,column:4},end:{line:135,column:5}}],line:133},"12":{loc:{start:{line:145,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:145,column:4},end:{line:148,column:5}},{start:{line:145,column:4},end:{line:148,column:5}}],line:145},"13":{loc:{start:{line:145,column:8},end:{line:145,column:71}},type:"binary-expr",locations:[{start:{line:145,column:8},end:{line:145,column:17}},{start:{line:145,column:21},end:{line:145,column:71}}],line:145},"14":{loc:{start:{line:150,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:150,column:4},end:{line:153,column:5}},{start:{line:150,column:4},end:{line:153,column:5}}],line:150},"15":{loc:{start:{line:150,column:8},end:{line:150,column:73}},type:"binary-expr",locations:[{start:{line:150,column:8},end:{line:150,column:18}},{start:{line:150,column:22},end:{line:150,column:73}}],line:150},"16":{loc:{start:{line:164,column:4},end:{line:166,column:5}},type:"if",locations:[{start:{line:164,column:4},end:{line:166,column:5}},{start:{line:164,column:4},end:{line:166,column:5}}],line:164},"17":{loc:{start:{line:164,column:8},end:{line:164,column:42}},type:"binary-expr",locations:[{start:{line:164,column:8},end:{line:164,column:22}},{start:{line:164,column:26},end:{line:164,column:42}}],line:164},"18":{loc:{start:{line:168,column:4},end:{line:171,column:5}},type:"if",locations:[{start:{line:168,column:4},end:{line:171,column:5}},{start:{line:168,column:4},end:{line:171,column:5}}],line:168},"19":{loc:{start:{line:168,column:8},end:{line:168,column:72}},type:"binary-expr",locations:[{start:{line:168,column:8},end:{line:168,column:17}},{start:{line:168,column:21},end:{line:168,column:72}}],line:168},"20":{loc:{start:{line:173,column:4},end:{line:176,column:5}},type:"if",locations:[{start:{line:173,column:4},end:{line:176,column:5}},{start:{line:173,column:4},end:{line:176,column:5}}],line:173},"21":{loc:{start:{line:173,column:8},end:{line:173,column:74}},type:"binary-expr",locations:[{start:{line:173,column:8},end:{line:173,column:18}},{start:{line:173,column:22},end:{line:173,column:74}}],line:173},"22":{loc:{start:{line:198,column:4},end:{line:200,column:5}},type:"if",locations:[{start:{line:198,column:4},end:{line:200,column:5}},{start:{line:198,column:4},end:{line:200,column:5}}],line:198},"23":{loc:{start:{line:206,column:4},end:{line:208,column:5}},type:"if",locations:[{start:{line:206,column:4},end:{line:208,column:5}},{start:{line:206,column:4},end:{line:208,column:5}}],line:206}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"52ccdf7741cb1b2106662ce4617430035e5e4485"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();import Comparator from'../../utils/comparator/Comparator';import HashTable from'../hash-table/HashTable';export default class BinaryTreeNode{/**
   * @param {*} [value] - node value.
   */constructor(value=(cov_1vh7xrxj5f.b[0][0]++,null)){cov_1vh7xrxj5f.f[0]++;cov_1vh7xrxj5f.s[0]++;this.left=null;cov_1vh7xrxj5f.s[1]++;this.right=null;cov_1vh7xrxj5f.s[2]++;this.parent=null;cov_1vh7xrxj5f.s[3]++;this.value=value;// Any node related meta information may be stored here.
cov_1vh7xrxj5f.s[4]++;this.meta=new HashTable();// This comparator is used to compare binary tree nodes with each other.
cov_1vh7xrxj5f.s[5]++;this.nodeComparator=new Comparator();}/**
   * @return {number}
   */get leftHeight(){cov_1vh7xrxj5f.f[1]++;cov_1vh7xrxj5f.s[6]++;if(!this.left){cov_1vh7xrxj5f.b[1][0]++;cov_1vh7xrxj5f.s[7]++;return 0;}else{cov_1vh7xrxj5f.b[1][1]++;}cov_1vh7xrxj5f.s[8]++;return this.left.height+1;}/**
   * @return {number}
   */get rightHeight(){cov_1vh7xrxj5f.f[2]++;cov_1vh7xrxj5f.s[9]++;if(!this.right){cov_1vh7xrxj5f.b[2][0]++;cov_1vh7xrxj5f.s[10]++;return 0;}else{cov_1vh7xrxj5f.b[2][1]++;}cov_1vh7xrxj5f.s[11]++;return this.right.height+1;}/**
   * @return {number}
   */get height(){cov_1vh7xrxj5f.f[3]++;cov_1vh7xrxj5f.s[12]++;return Math.max(this.leftHeight,this.rightHeight);}/**
   * @return {number}
   */get balanceFactor(){cov_1vh7xrxj5f.f[4]++;cov_1vh7xrxj5f.s[13]++;return this.leftHeight-this.rightHeight;}/**
   * Get parent's sibling if it exists.
   * @return {BinaryTreeNode}
   */get uncle(){cov_1vh7xrxj5f.f[5]++;cov_1vh7xrxj5f.s[14]++;// Check if current node has parent.
if(!this.parent){cov_1vh7xrxj5f.b[3][0]++;cov_1vh7xrxj5f.s[15]++;return undefined;}else{cov_1vh7xrxj5f.b[3][1]++;}// Check if current node has grand-parent.
cov_1vh7xrxj5f.s[16]++;if(!this.parent.parent){cov_1vh7xrxj5f.b[4][0]++;cov_1vh7xrxj5f.s[17]++;return undefined;}else{cov_1vh7xrxj5f.b[4][1]++;}// Check if grand-parent has two children.
cov_1vh7xrxj5f.s[18]++;if((cov_1vh7xrxj5f.b[6][0]++,!this.parent.parent.left)||(cov_1vh7xrxj5f.b[6][1]++,!this.parent.parent.right)){cov_1vh7xrxj5f.b[5][0]++;cov_1vh7xrxj5f.s[19]++;return undefined;}else{cov_1vh7xrxj5f.b[5][1]++;}// So for now we know that current node has grand-parent and this
// grand-parent has two children. Let's find out who is the uncle.
cov_1vh7xrxj5f.s[20]++;if(this.nodeComparator.equal(this.parent,this.parent.parent.left)){cov_1vh7xrxj5f.b[7][0]++;cov_1vh7xrxj5f.s[21]++;// Right one is an uncle.
return this.parent.parent.right;}else{cov_1vh7xrxj5f.b[7][1]++;}// Left one is an uncle.
cov_1vh7xrxj5f.s[22]++;return this.parent.parent.left;}/**
   * @param {*} value
   * @return {BinaryTreeNode}
   */setValue(value){cov_1vh7xrxj5f.f[6]++;cov_1vh7xrxj5f.s[23]++;this.value=value;cov_1vh7xrxj5f.s[24]++;return this;}/**
   * @param {BinaryTreeNode} node
   * @return {BinaryTreeNode}
   */setLeft(node){cov_1vh7xrxj5f.f[7]++;cov_1vh7xrxj5f.s[25]++;// Reset parent for left node since it is going to be detached.
if(this.left){cov_1vh7xrxj5f.b[8][0]++;cov_1vh7xrxj5f.s[26]++;this.left.parent=null;}else{cov_1vh7xrxj5f.b[8][1]++;}// Attach new node to the left.
cov_1vh7xrxj5f.s[27]++;this.left=node;// Make current node to be a parent for new left one.
cov_1vh7xrxj5f.s[28]++;if(this.left){cov_1vh7xrxj5f.b[9][0]++;cov_1vh7xrxj5f.s[29]++;this.left.parent=this;}else{cov_1vh7xrxj5f.b[9][1]++;}cov_1vh7xrxj5f.s[30]++;return this;}/**
   * @param {BinaryTreeNode} node
   * @return {BinaryTreeNode}
   */setRight(node){cov_1vh7xrxj5f.f[8]++;cov_1vh7xrxj5f.s[31]++;// Reset parent for right node since it is going to be detached.
if(this.right){cov_1vh7xrxj5f.b[10][0]++;cov_1vh7xrxj5f.s[32]++;this.right.parent=null;}else{cov_1vh7xrxj5f.b[10][1]++;}// Attach new node to the right.
cov_1vh7xrxj5f.s[33]++;this.right=node;// Make current node to be a parent for new right one.
cov_1vh7xrxj5f.s[34]++;if(node){cov_1vh7xrxj5f.b[11][0]++;cov_1vh7xrxj5f.s[35]++;this.right.parent=this;}else{cov_1vh7xrxj5f.b[11][1]++;}cov_1vh7xrxj5f.s[36]++;return this;}/**
   * @param {BinaryTreeNode} nodeToRemove
   * @return {boolean}
   */removeChild(nodeToRemove){cov_1vh7xrxj5f.f[9]++;cov_1vh7xrxj5f.s[37]++;if((cov_1vh7xrxj5f.b[13][0]++,this.left)&&(cov_1vh7xrxj5f.b[13][1]++,this.nodeComparator.equal(this.left,nodeToRemove))){cov_1vh7xrxj5f.b[12][0]++;cov_1vh7xrxj5f.s[38]++;this.left=null;cov_1vh7xrxj5f.s[39]++;return true;}else{cov_1vh7xrxj5f.b[12][1]++;}cov_1vh7xrxj5f.s[40]++;if((cov_1vh7xrxj5f.b[15][0]++,this.right)&&(cov_1vh7xrxj5f.b[15][1]++,this.nodeComparator.equal(this.right,nodeToRemove))){cov_1vh7xrxj5f.b[14][0]++;cov_1vh7xrxj5f.s[41]++;this.right=null;cov_1vh7xrxj5f.s[42]++;return true;}else{cov_1vh7xrxj5f.b[14][1]++;}cov_1vh7xrxj5f.s[43]++;return false;}/**
   * @param {BinaryTreeNode} nodeToReplace
   * @param {BinaryTreeNode} replacementNode
   * @return {boolean}
   */replaceChild(nodeToReplace,replacementNode){cov_1vh7xrxj5f.f[10]++;cov_1vh7xrxj5f.s[44]++;if((cov_1vh7xrxj5f.b[17][0]++,!nodeToReplace)||(cov_1vh7xrxj5f.b[17][1]++,!replacementNode)){cov_1vh7xrxj5f.b[16][0]++;cov_1vh7xrxj5f.s[45]++;return false;}else{cov_1vh7xrxj5f.b[16][1]++;}cov_1vh7xrxj5f.s[46]++;if((cov_1vh7xrxj5f.b[19][0]++,this.left)&&(cov_1vh7xrxj5f.b[19][1]++,this.nodeComparator.equal(this.left,nodeToReplace))){cov_1vh7xrxj5f.b[18][0]++;cov_1vh7xrxj5f.s[47]++;this.left=replacementNode;cov_1vh7xrxj5f.s[48]++;return true;}else{cov_1vh7xrxj5f.b[18][1]++;}cov_1vh7xrxj5f.s[49]++;if((cov_1vh7xrxj5f.b[21][0]++,this.right)&&(cov_1vh7xrxj5f.b[21][1]++,this.nodeComparator.equal(this.right,nodeToReplace))){cov_1vh7xrxj5f.b[20][0]++;cov_1vh7xrxj5f.s[50]++;this.right=replacementNode;cov_1vh7xrxj5f.s[51]++;return true;}else{cov_1vh7xrxj5f.b[20][1]++;}cov_1vh7xrxj5f.s[52]++;return false;}/**
   * @param {BinaryTreeNode} sourceNode
   * @param {BinaryTreeNode} targetNode
   */static copyNode(sourceNode,targetNode){cov_1vh7xrxj5f.f[11]++;cov_1vh7xrxj5f.s[53]++;targetNode.setValue(sourceNode.value);cov_1vh7xrxj5f.s[54]++;targetNode.setLeft(sourceNode.left);cov_1vh7xrxj5f.s[55]++;targetNode.setRight(sourceNode.right);}/**
   * @return {*[]}
   */traverseInOrder(){cov_1vh7xrxj5f.f[12]++;let traverse=(cov_1vh7xrxj5f.s[56]++,[]);// Add left node.
cov_1vh7xrxj5f.s[57]++;if(this.left){cov_1vh7xrxj5f.b[22][0]++;cov_1vh7xrxj5f.s[58]++;traverse=traverse.concat(this.left.traverseInOrder());}else{cov_1vh7xrxj5f.b[22][1]++;}// Add root.
cov_1vh7xrxj5f.s[59]++;traverse.push(this.value);// Add right node.
cov_1vh7xrxj5f.s[60]++;if(this.right){cov_1vh7xrxj5f.b[23][0]++;cov_1vh7xrxj5f.s[61]++;traverse=traverse.concat(this.right.traverseInOrder());}else{cov_1vh7xrxj5f.b[23][1]++;}cov_1vh7xrxj5f.s[62]++;return traverse;}/**
   * @return {string}
   */toString(){cov_1vh7xrxj5f.f[13]++;cov_1vh7xrxj5f.s[63]++;return this.traverseInOrder().toString();}}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9oYi9sYXRsaWIvanNzZXJ2ZXIvamF2YXNjcmlwdC1hbGdvcml0aG1zL3NyYy9kYXRhLXN0cnVjdHVyZXMvdHJlZS9CaW5hcnlUcmVlTm9kZS5qcyJdLCJuYW1lcyI6WyJDb21wYXJhdG9yIiwiSGFzaFRhYmxlIiwiQmluYXJ5VHJlZU5vZGUiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwibGVmdCIsInJpZ2h0IiwicGFyZW50IiwibWV0YSIsIm5vZGVDb21wYXJhdG9yIiwibGVmdEhlaWdodCIsImhlaWdodCIsInJpZ2h0SGVpZ2h0IiwiTWF0aCIsIm1heCIsImJhbGFuY2VGYWN0b3IiLCJ1bmNsZSIsInVuZGVmaW5lZCIsImVxdWFsIiwic2V0VmFsdWUiLCJzZXRMZWZ0Iiwibm9kZSIsInNldFJpZ2h0IiwicmVtb3ZlQ2hpbGQiLCJub2RlVG9SZW1vdmUiLCJyZXBsYWNlQ2hpbGQiLCJub2RlVG9SZXBsYWNlIiwicmVwbGFjZW1lbnROb2RlIiwiY29weU5vZGUiLCJzb3VyY2VOb2RlIiwidGFyZ2V0Tm9kZSIsInRyYXZlcnNlSW5PcmRlciIsInRyYXZlcnNlIiwiY29uY2F0IiwicHVzaCIsInRvU3RyaW5nIl0sIm1hcHBpbmdzIjoia21YQUFBLE1BQU9BLENBQUFBLFVBQVAsS0FBdUIsbUNBQXZCLENBQ0EsTUFBT0MsQ0FBQUEsU0FBUCxLQUFzQix5QkFBdEIsQ0FFQSxjQUFlLE1BQU1DLENBQUFBLGNBQWUsQ0FDbEM7O0tBR0FDLFdBQVcsQ0FBQ0MsS0FBSywyQkFBRyxJQUFILENBQU4sQ0FBZSw2Q0FDeEIsS0FBS0MsSUFBTCxDQUFZLElBQVosQ0FEd0Isc0JBRXhCLEtBQUtDLEtBQUwsQ0FBYSxJQUFiLENBRndCLHNCQUd4QixLQUFLQyxNQUFMLENBQWMsSUFBZCxDQUh3QixzQkFJeEIsS0FBS0gsS0FBTCxDQUFhQSxLQUFiLENBRUE7QUFOd0Isc0JBT3hCLEtBQUtJLElBQUwsQ0FBWSxHQUFJUCxDQUFBQSxTQUFKLEVBQVosQ0FFQTtBQVR3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QUFBLFFBQVAsQ0FBZ0JDLFVBQWhCLENBQTRCQyxVQUE1QixDQUF3QywrQ0FDdENBLFVBQVUsQ0FBQ1gsUUFBWCxDQUFvQlUsVUFBVSxDQUFDekIsS0FBL0IsRUFEc0MsdUJBRXRDMEIsVUFBVSxDQUFDVixPQUFYLENBQW1CUyxVQUFVLENBQUN4QixJQUE5QixFQUZzQyx1QkFHdEN5QixVQUFVLENBQUNSLFFBQVgsQ0FBb0JPLFVBQVUsQ0FBQ3ZCLEtBQS9CLEVBQ0QsQ0FFRDs7S0FHQXlCLGVBQWUsRUFBRyx3QkFDaEIsR0FBSUMsQ0FBQUEsUUFBUSx5QkFBRyxFQUFILENBQVosQ0FFQTtBQUhnQix1QkFJaEIsR0FBSSxLQUFLM0IsSUFBVCxDQUFlLGtEQUNiMkIsUUFBUSxDQUFHQSxRQUFRLENBQUNDLE1BQVQsQ0FBZ0IsS0FBSzVCLElBQUwsQ0FBVTBCLGVBQVYsRUFBaEIsQ0FBWCxDQUNELENBRkQsZ0NBSUE7QUFSZ0IsdUJBU2hCQyxRQUFRLENBQUNFLElBQVQsQ0FBYyxLQUFLOUIsS0FBbkIsRUFFQTtBQVhnQix1QkFZaEIsR0FBSSxLQUFLRSxLQUFULENBQWdCLGtEQUNkMEIsUUFBUSxDQUFHQSxRQUFRLENBQUNDLE1BQVQsQ0FBZ0IsS0FBSzNCLEtBQUwsQ0FBV3lCLGVBQVgsRUFBaEIsQ0FBWCxDQUNELENBRkQsZ0NBWmdCLHVCQWdCaEIsTUFBT0MsQ0FBQUEsUUFBUCxDQUNELENBRUQ7O0tBR0FHLFFBQVEsRUFBRywrQ0FDVCxNQUFPLE1BQUtKLGVBQUwsR0FBdUJJLFFBQXZCLEVBQVAsQ0FDRCxDQXROaUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ29tcGFyYXRvciBmcm9tICcuLi8uLi91dGlscy9jb21wYXJhdG9yL0NvbXBhcmF0b3InO1xuaW1wb3J0IEhhc2hUYWJsZSBmcm9tICcuLi9oYXNoLXRhYmxlL0hhc2hUYWJsZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpbmFyeVRyZWVOb2RlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gW3ZhbHVlXSAtIG5vZGUgdmFsdWUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih2YWx1ZSA9IG51bGwpIHtcbiAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgIHRoaXMucmlnaHQgPSBudWxsO1xuICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cbiAgICAvLyBBbnkgbm9kZSByZWxhdGVkIG1ldGEgaW5mb3JtYXRpb24gbWF5IGJlIHN0b3JlZCBoZXJlLlxuICAgIHRoaXMubWV0YSA9IG5ldyBIYXNoVGFibGUoKTtcblxuICAgIC8vIFRoaXMgY29tcGFyYXRvciBpcyB1c2VkIHRvIGNvbXBhcmUgYmluYXJ5IHRyZWUgbm9kZXMgd2l0aCBlYWNoIG90aGVyLlxuICAgIHRoaXMubm9kZUNvbXBhcmF0b3IgPSBuZXcgQ29tcGFyYXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCBsZWZ0SGVpZ2h0KCkge1xuICAgIGlmICghdGhpcy5sZWZ0KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5sZWZ0LmhlaWdodCArIDE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0IHJpZ2h0SGVpZ2h0KCkge1xuICAgIGlmICghdGhpcy5yaWdodCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmlnaHQuaGVpZ2h0ICsgMTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgaGVpZ2h0KCkge1xuICAgIHJldHVybiBNYXRoLm1heCh0aGlzLmxlZnRIZWlnaHQsIHRoaXMucmlnaHRIZWlnaHQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldCBiYWxhbmNlRmFjdG9yKCkge1xuICAgIHJldHVybiB0aGlzLmxlZnRIZWlnaHQgLSB0aGlzLnJpZ2h0SGVpZ2h0O1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJlbnQncyBzaWJsaW5nIGlmIGl0IGV4aXN0cy5cbiAgICogQHJldHVybiB7QmluYXJ5VHJlZU5vZGV9XG4gICAqL1xuICBnZXQgdW5jbGUoKSB7XG4gICAgLy8gQ2hlY2sgaWYgY3VycmVudCBub2RlIGhhcyBwYXJlbnQuXG4gICAgaWYgKCF0aGlzLnBhcmVudCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjdXJyZW50IG5vZGUgaGFzIGdyYW5kLXBhcmVudC5cbiAgICBpZiAoIXRoaXMucGFyZW50LnBhcmVudCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBncmFuZC1wYXJlbnQgaGFzIHR3byBjaGlsZHJlbi5cbiAgICBpZiAoIXRoaXMucGFyZW50LnBhcmVudC5sZWZ0IHx8ICF0aGlzLnBhcmVudC5wYXJlbnQucmlnaHQpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gU28gZm9yIG5vdyB3ZSBrbm93IHRoYXQgY3VycmVudCBub2RlIGhhcyBncmFuZC1wYXJlbnQgYW5kIHRoaXNcbiAgICAvLyBncmFuZC1wYXJlbnQgaGFzIHR3byBjaGlsZHJlbi4gTGV0J3MgZmluZCBvdXQgd2hvIGlzIHRoZSB1bmNsZS5cbiAgICBpZiAodGhpcy5ub2RlQ29tcGFyYXRvci5lcXVhbCh0aGlzLnBhcmVudCwgdGhpcy5wYXJlbnQucGFyZW50LmxlZnQpKSB7XG4gICAgICAvLyBSaWdodCBvbmUgaXMgYW4gdW5jbGUuXG4gICAgICByZXR1cm4gdGhpcy5wYXJlbnQucGFyZW50LnJpZ2h0O1xuICAgIH1cblxuICAgIC8vIExlZnQgb25lIGlzIGFuIHVuY2xlLlxuICAgIHJldHVybiB0aGlzLnBhcmVudC5wYXJlbnQubGVmdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm4ge0JpbmFyeVRyZWVOb2RlfVxuICAgKi9cbiAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0JpbmFyeVRyZWVOb2RlfSBub2RlXG4gICAqIEByZXR1cm4ge0JpbmFyeVRyZWVOb2RlfVxuICAgKi9cbiAgc2V0TGVmdChub2RlKSB7XG4gICAgLy8gUmVzZXQgcGFyZW50IGZvciBsZWZ0IG5vZGUgc2luY2UgaXQgaXMgZ29pbmcgdG8gYmUgZGV0YWNoZWQuXG4gICAgaWYgKHRoaXMubGVmdCkge1xuICAgICAgdGhpcy5sZWZ0LnBhcmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoIG5ldyBub2RlIHRvIHRoZSBsZWZ0LlxuICAgIHRoaXMubGVmdCA9IG5vZGU7XG5cbiAgICAvLyBNYWtlIGN1cnJlbnQgbm9kZSB0byBiZSBhIHBhcmVudCBmb3IgbmV3IGxlZnQgb25lLlxuICAgIGlmICh0aGlzLmxlZnQpIHtcbiAgICAgIHRoaXMubGVmdC5wYXJlbnQgPSB0aGlzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QmluYXJ5VHJlZU5vZGV9IG5vZGVcbiAgICogQHJldHVybiB7QmluYXJ5VHJlZU5vZGV9XG4gICAqL1xuICBzZXRSaWdodChub2RlKSB7XG4gICAgLy8gUmVzZXQgcGFyZW50IGZvciByaWdodCBub2RlIHNpbmNlIGl0IGlzIGdvaW5nIHRvIGJlIGRldGFjaGVkLlxuICAgIGlmICh0aGlzLnJpZ2h0KSB7XG4gICAgICB0aGlzLnJpZ2h0LnBhcmVudCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gQXR0YWNoIG5ldyBub2RlIHRvIHRoZSByaWdodC5cbiAgICB0aGlzLnJpZ2h0ID0gbm9kZTtcblxuICAgIC8vIE1ha2UgY3VycmVudCBub2RlIHRvIGJlIGEgcGFyZW50IGZvciBuZXcgcmlnaHQgb25lLlxuICAgIGlmIChub2RlKSB7XG4gICAgICB0aGlzLnJpZ2h0LnBhcmVudCA9IHRoaXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtCaW5hcnlUcmVlTm9kZX0gbm9kZVRvUmVtb3ZlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICByZW1vdmVDaGlsZChub2RlVG9SZW1vdmUpIHtcbiAgICBpZiAodGhpcy5sZWZ0ICYmIHRoaXMubm9kZUNvbXBhcmF0b3IuZXF1YWwodGhpcy5sZWZ0LCBub2RlVG9SZW1vdmUpKSB7XG4gICAgICB0aGlzLmxlZnQgPSBudWxsO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmlnaHQgJiYgdGhpcy5ub2RlQ29tcGFyYXRvci5lcXVhbCh0aGlzLnJpZ2h0LCBub2RlVG9SZW1vdmUpKSB7XG4gICAgICB0aGlzLnJpZ2h0ID0gbnVsbDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0JpbmFyeVRyZWVOb2RlfSBub2RlVG9SZXBsYWNlXG4gICAqIEBwYXJhbSB7QmluYXJ5VHJlZU5vZGV9IHJlcGxhY2VtZW50Tm9kZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcmVwbGFjZUNoaWxkKG5vZGVUb1JlcGxhY2UsIHJlcGxhY2VtZW50Tm9kZSkge1xuICAgIGlmICghbm9kZVRvUmVwbGFjZSB8fCAhcmVwbGFjZW1lbnROb2RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGVmdCAmJiB0aGlzLm5vZGVDb21wYXJhdG9yLmVxdWFsKHRoaXMubGVmdCwgbm9kZVRvUmVwbGFjZSkpIHtcbiAgICAgIHRoaXMubGVmdCA9IHJlcGxhY2VtZW50Tm9kZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJpZ2h0ICYmIHRoaXMubm9kZUNvbXBhcmF0b3IuZXF1YWwodGhpcy5yaWdodCwgbm9kZVRvUmVwbGFjZSkpIHtcbiAgICAgIHRoaXMucmlnaHQgPSByZXBsYWNlbWVudE5vZGU7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtCaW5hcnlUcmVlTm9kZX0gc291cmNlTm9kZVxuICAgKiBAcGFyYW0ge0JpbmFyeVRyZWVOb2RlfSB0YXJnZXROb2RlXG4gICAqL1xuICBzdGF0aWMgY29weU5vZGUoc291cmNlTm9kZSwgdGFyZ2V0Tm9kZSkge1xuICAgIHRhcmdldE5vZGUuc2V0VmFsdWUoc291cmNlTm9kZS52YWx1ZSk7XG4gICAgdGFyZ2V0Tm9kZS5zZXRMZWZ0KHNvdXJjZU5vZGUubGVmdCk7XG4gICAgdGFyZ2V0Tm9kZS5zZXRSaWdodChzb3VyY2VOb2RlLnJpZ2h0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHsqW119XG4gICAqL1xuICB0cmF2ZXJzZUluT3JkZXIoKSB7XG4gICAgbGV0IHRyYXZlcnNlID0gW107XG5cbiAgICAvLyBBZGQgbGVmdCBub2RlLlxuICAgIGlmICh0aGlzLmxlZnQpIHtcbiAgICAgIHRyYXZlcnNlID0gdHJhdmVyc2UuY29uY2F0KHRoaXMubGVmdC50cmF2ZXJzZUluT3JkZXIoKSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJvb3QuXG4gICAgdHJhdmVyc2UucHVzaCh0aGlzLnZhbHVlKTtcblxuICAgIC8vIEFkZCByaWdodCBub2RlLlxuICAgIGlmICh0aGlzLnJpZ2h0KSB7XG4gICAgICB0cmF2ZXJzZSA9IHRyYXZlcnNlLmNvbmNhdCh0aGlzLnJpZ2h0LnRyYXZlcnNlSW5PcmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJhdmVyc2U7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhdmVyc2VJbk9yZGVyKCkudG9TdHJpbmcoKTtcbiAgfVxufVxuIl19